{% extends 'base.html' %}

{% block title %}Admin Actions{% endblock %}

{% block content %}
<div class="p-6 rounded shadow" data-admin-theme-light="bg-white text-black" data-admin-theme-dark="bg-black text-white">
  <h2 class="text-xl font-semibold mb-4" data-admin-theme-light="text-black" data-admin-theme-dark="text-white">Admin Actions</h2>

  <section class="mb-6">
  <h3 class="font-medium mb-2" data-admin-theme-light="text-black" data-admin-theme-dark="text-white">Register a Creator</h3>
    <form method="post" class="grid grid-cols-1 gap-2 max-w-md">
  <input class="border rounded px-3 py-2" name="Username" placeholder="Username" required>
  <input class="border rounded px-3 py-2" name="Email" placeholder="Email" required>
  <input class="border rounded px-3 py-2" name="Password" placeholder="Password" type="password" required>
      <div class="flex justify-end">
        <button class="bg-blue-600 text-white px-4 py-2 rounded">Create Creator</button>
      </div>
    </form>
  </section>
<hr><hr><hr>
  <section class="mb-6">
    <h3 class="font-medium mb-2" data-admin-theme-light="text-black" data-admin-theme-dark="text-white">Creators</h3>
    <ul class="space-y-2">
      {% for c in creators %}
        <li class=" items-center justify-between border rounded px-3 py-2" data-admin-theme-light="bg-white text-black" data-admin-theme-dark="bg-gray-800 text-white">
          <div>
            <div class="font-semibold">{{ c[1] }}</div>
            <div class="text-sm" data-admin-theme-light="text-gray-600" data-admin-theme-dark="text-gray-300">{{ c[2] }}</div>
            {% if c[3] %}
              <div class="text-sm" data-admin-theme-light="text-red-600" data-admin-theme-dark="text-red-300">Suspended until {{ c[3] }}</div>
            {% endif %}
          </div>
          <div class=" items-center">
            <form method="post" action="{{ url_for('admin_delete_user', user_id=c[0]) }}" class="flex " onsubmit="return confirm('Delete this user and all their content?');">
                        <a href="{{ url_for('creator_profile', user_id=c[0]) }}" class="bg-blue-600 text-white px-3 space-x-6 py-1 rounded text-sm">View posts</a>

              <button class="bg-red-600 space-x-6 text-white px-3 py-1 rounded">Delete</button>
            
            </form>
            <form method="post" action="{{ url_for('admin_suspend_user', user_id=c[0]) }}" class="flex items-center gap-2">
              <select name="days" class="border rounded px-2 bg-black text-white py-1 text-sm">
                <option value="1">1 day</option>
                <option value="7">7 days</option>
                <option value="30">30 days</option>
                <option value="0">Lift suspension</option>
              </select>
              <button class="bg-yellow-500 text-white px-3 py-1 rounded">Suspend</button>
            </form>
            <!-- Variant selector form -->
            <form method="post" action="{{ url_for('admin_set_variant') }}" class="flex items-center gap-2">
              <input type="hidden" name="user_id" value="{{ c[0] }}">
              <select name="ui_variant" class="border rounded px-2 bg-black text-white py-1 text-sm">
                <option value="v1">v1 (default)</option>
                <option value="v2">v2 (alternate)</option>
              </select>
              <button class="bg-green-600 text-white px-3 py-1 rounded">Set</button>
            </form>
          </div>
        </li>
      {% else %}
        <li>No creators yet</li>
      {% endfor %}
    </ul>
  </section>

  <section>
    <h3 class="font-medium mb-2">Media</h3>
    <ul class="space-y-2">
      {% for m in media %}
        <li class="flex items-center justify-between border rounded px-3 py-2" data-admin-theme-light="bg-white text-black" data-admin-theme-dark="bg-gray-800 text-white">
          <div>
            <a class="font-semibold" href="{{ url_for('media_detail', media_id=m[0]) }}">{{ m[1] }}</a>
            <div class="text-sm" data-admin-theme-light="text-gray-600" data-admin-theme-dark="text-gray-300">by {{ m[3] }}</div>
          </div>
          <form method="post" action="{{ url_for('admin_delete_media', media_id=m[0]) }}">
            <button class="bg-red-600 text-white px-3 py-1 rounded">Delete</button>
          </form>
        </li>
      {% else %}
        <li>No media yet</li>
      {% endfor %}
    </ul>
  </section>
</div>

{% endblock %}
